<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:24.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	page-break-after:avoid;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	font-weight:normal;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Calibri","sans-serif";}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Times New Roman","serif";
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Times New Roman","serif";
	font-weight:bold;}
span.Definition
	{mso-style-name:Definition;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
span.URL
	{mso-style-name:URL;
	color:windowtext;
	text-decoration:underline;}
p.SourceCodeExcerpt, li.SourceCodeExcerpt, div.SourceCodeExcerpt
	{mso-style-name:"Source Code Excerpt";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeExcerptCxSpFirst, li.SourceCodeExcerptCxSpFirst, div.SourceCodeExcerptCxSpFirst
	{mso-style-name:"Source Code ExcerptCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeExcerptCxSpMiddle, li.SourceCodeExcerptCxSpMiddle, div.SourceCodeExcerptCxSpMiddle
	{mso-style-name:"Source Code ExcerptCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeExcerptCxSpLast, li.SourceCodeExcerptCxSpLast, div.SourceCodeExcerptCxSpLast
	{mso-style-name:"Source Code ExcerptCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFeatured, li.SourceCodeFeatured, div.SourceCodeFeatured
	{mso-style-name:"Source Code \(Featured\)";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";
	color:black;}
p.SourceCodeFeaturedCxSpFirst, li.SourceCodeFeaturedCxSpFirst, div.SourceCodeFeaturedCxSpFirst
	{mso-style-name:"Source Code \(Featured\)CxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";
	color:black;}
p.SourceCodeFeaturedCxSpMiddle, li.SourceCodeFeaturedCxSpMiddle, div.SourceCodeFeaturedCxSpMiddle
	{mso-style-name:"Source Code \(Featured\)CxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";
	color:black;}
p.SourceCodeFeaturedCxSpLast, li.SourceCodeFeaturedCxSpLast, div.SourceCodeFeaturedCxSpLast
	{mso-style-name:"Source Code \(Featured\)CxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";
	color:black;}
p.SampleRun, li.SampleRun, div.SampleRun
	{mso-style-name:"Sample Run";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpFirst, li.SampleRunCxSpFirst, div.SampleRunCxSpFirst
	{mso-style-name:"Sample RunCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpMiddle, li.SampleRunCxSpMiddle, div.SampleRunCxSpMiddle
	{mso-style-name:"Sample RunCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpLast, li.SampleRunCxSpLast, div.SampleRunCxSpLast
	{mso-style-name:"Sample RunCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.TopicsCoveredbox, li.TopicsCoveredbox, div.TopicsCoveredbox
	{mso-style-name:"Topics Covered box";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpFirst, li.TopicsCoveredboxCxSpFirst, div.TopicsCoveredboxCxSpFirst
	{mso-style-name:"Topics Covered boxCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpMiddle, li.TopicsCoveredboxCxSpMiddle, div.TopicsCoveredboxCxSpMiddle
	{mso-style-name:"Topics Covered boxCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpLast, li.TopicsCoveredboxCxSpLast, div.TopicsCoveredboxCxSpLast
	{mso-style-name:"Topics Covered boxCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
span.Literal
	{mso-style-name:Literal;
	font-family:Courier;}
span.SourceCodeComment
	{mso-style-name:"Source Code Comment";
	color:#7F7F7F;}
span.SourceCodeFilename
	{mso-style-name:"Source Code Filename";
	font-family:"Lucida Sans Typewriter";}
span.Filename
	{mso-style-name:Filename;
	font-style:italic;}
p.ChapterQuotes, li.ChapterQuotes, div.ChapterQuotes
	{mso-style-name:"Chapter Quotes";
	margin-top:30.0pt;
	margin-right:1.0in;
	margin-bottom:30.0pt;
	margin-left:1.0in;
	text-align:justify;
	line-height:115%;
	font-size:14.0pt;
	font-family:"Times New Roman","serif";}
p.ChapterQuotesCxSpFirst, li.ChapterQuotesCxSpFirst, div.ChapterQuotesCxSpFirst
	{mso-style-name:"Chapter QuotesCxSpFirst";
	margin-top:30.0pt;
	margin-right:1.0in;
	margin-bottom:0in;
	margin-left:1.0in;
	margin-bottom:.0001pt;
	text-align:justify;
	line-height:115%;
	font-size:14.0pt;
	font-family:"Times New Roman","serif";}
p.ChapterQuotesCxSpMiddle, li.ChapterQuotesCxSpMiddle, div.ChapterQuotesCxSpMiddle
	{mso-style-name:"Chapter QuotesCxSpMiddle";
	margin-top:0in;
	margin-right:1.0in;
	margin-bottom:0in;
	margin-left:1.0in;
	margin-bottom:.0001pt;
	text-align:justify;
	line-height:115%;
	font-size:14.0pt;
	font-family:"Times New Roman","serif";}
p.ChapterQuotesCxSpLast, li.ChapterQuotesCxSpLast, div.ChapterQuotesCxSpLast
	{mso-style-name:"Chapter QuotesCxSpLast";
	margin-top:0in;
	margin-right:1.0in;
	margin-bottom:30.0pt;
	margin-left:1.0in;
	text-align:justify;
	line-height:115%;
	font-size:14.0pt;
	font-family:"Times New Roman","serif";}
p.SourceCodeHeadline, li.SourceCodeHeadline, div.SourceCodeHeadline
	{mso-style-name:"Source Code \(Headline\)";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:7.0pt;
	font-family:"Lucida Sans Typewriter";
	color:black;}
p.SourceCodeHeadlineCxSpFirst, li.SourceCodeHeadlineCxSpFirst, div.SourceCodeHeadlineCxSpFirst
	{mso-style-name:"Source Code \(Headline\)CxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:7.0pt;
	font-family:"Lucida Sans Typewriter";
	color:black;}
p.SourceCodeHeadlineCxSpMiddle, li.SourceCodeHeadlineCxSpMiddle, div.SourceCodeHeadlineCxSpMiddle
	{mso-style-name:"Source Code \(Headline\)CxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:7.0pt;
	font-family:"Lucida Sans Typewriter";
	color:black;}
p.SourceCodeHeadlineCxSpLast, li.SourceCodeHeadlineCxSpLast, div.SourceCodeHeadlineCxSpLast
	{mso-style-name:"Source Code \(Headline\)CxSpLast";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:7.0pt;
	font-family:"Lucida Sans Typewriter";
	color:black;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US>
<div style='float: right; height: 310px; font-family: sans-serif;'>Ad: Programming books by Al Sweigart<br />
    <a href='http://www.nostarch.com/automatestuff' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src='/images/cover_automate_thumb.png' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/gp/product/0982106017?ie=UTF8&tag=playwithpyth-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=0982106017' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src='/images/cover_inventwithpython_thumb.jpg' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&tag=playwithpyth-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=0982106017' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src='/images/cover_makinggames_thumb.png' style="height: 200px; border: solid black 1px;" /></a>
    <a href='https://www.amazon.com/gp/product/1593278225/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1593278225&linkCode=as2&tag=playwithpyth-20&linkId=bf3b22819f0886d277e88b8a653b81ad' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src='/images/cover_crackingcodes_thumb.png' style="height: 200px; border: solid black 1px;" /></a>
</div>

<div class=WordSection1><p><strong>Note: The second edition of this book is available under the title <em><a href="https://inventwithpython.com/cracking">Cracking Codes with Python</a></em></strong></p>

<p class=MsoNormal align=center style='text-align:center'><img width=327
height=180 id="Picture 125" src="chapter11_files/image001.jpg"></p>

<div style='border:none;border-bottom:solid #4F81BD 1.0pt;padding:0in 0in 1.0pt 0in'>

<h1><a name="_Toc353630739"><span style='font-variant:normal !important;
text-transform:uppercase'>Encrypting and Decrypting Files</span></a></h1>

</div>

<div style='border:solid windowtext 1.0pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;
background:#DBE5F1'>

<p class=TopicsCoveredboxCxSpFirst style='background:#DBE5F1;border:none;
padding:0in'>Topics Covered In This Chapter:</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Reading and writing files</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal>open()</span> function</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal>read()</span> file object method</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal>close()</span> file object method</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal>write()</span> file object method</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal>os.path.exists()</span> function</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal>startswith()</span> string method</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal>title()</span> string method</p>

<p class=TopicsCoveredboxCxSpLast style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal>time</span> module and <span
class=Literal>time.time()</span> function</p>

</div>

<p class=ChapterQuotesCxSpFirst style='margin-top:30.0pt;margin-right:9.0pt;
margin-bottom:30.0pt;margin-left:9.0pt'>“Why do security police grab people and
torture them? To get their information. If you build an information management
system that concentrates information from dozens of people, you’ve made that
dozens of times more attractive. You’ve focused the repressive regime’s
attention on the hard disk. And hard disks put up no resistance to torture. You
need to give the hard disk a way to resist. That’s cryptography.”</p>

<p class=ChapterQuotesCxSpMiddle>&nbsp;</p>

<p class=ChapterQuotesCxSpLast align=right style='text-align:right'><span
style='font-size:11.0pt;line-height:115%'>Patrick Ball</span></p>

<p class=MsoNormal>Up until now our programs have only worked on small messages
that we type directly into the source code as string values. The cipher program
in this chapter will use the transposition cipher to encrypt and decrypt entire
files, which can be millions of characters in size.</p>

<h2><a name="_Toc353630740">Plain Text Files</a></h2>

<p class=MsoNormal>This program will encrypt and decrypt plain text files.
These are the kind of files that only have text data and usually have the .txt
file extension. Files from word processing programs that let you change the
font, color, or size of the text do not produce plain text files. You can write
your own text files using Notepad (on Windows), TextMate or TextEdit (on OS X),
or gedit (on Linux) or a similar plain text editor program. You can even use
IDLE’s own file editor and save the files with a .txt extension instead of the
usual .py extension. </p>

<p class=MsoNormal>For some samples, you can download the following text files
from this book’s website:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span class=URL><u><span
style='font-family:Symbol;text-decoration:none'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></u></span><span class=URL><u>http://invpy.com/devilsdictionary.txt</u></span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span class=URL><u><span
style='font-family:Symbol;text-decoration:none'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></u></span><span class=URL><u>http://invpy.com/frankenstein.txt</u></span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span class=URL><u><span
style='font-family:Symbol;text-decoration:none'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></u></span><span class=URL><u>http://invpy.com/siddhartha.txt</u></span></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span class=URL><u><span
style='font-family:Symbol;text-decoration:none'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></u></span><span class=URL><u>http://invpy.com/thetimemachine.txt</u></span></p>

<p class=MsoNormal>These are text files of some books (that are now in the
public domain, so it is perfectly legal to download them.) For example,
download Mary Shelley’s classic novel “Frankenstein” from <span class=URL><u>http://invpy.com/frankenstein.txt</u></span>.
Double-click the file to open it in a text editor program. There are over 78,000
words in this text file! It would take some time to type this into our
encryption program. But if it is in a file, the program can read the file and
do the encryption in a couple seconds.</p>

<p class=MsoNormal>If you get an error that looks like “<span class=Literal>UnicodeDecodeError:
'charmap' codec can't decode byte 0x90 in position 148: character maps to
&lt;undefined&gt;</span>” then you are running the cipher program on a
non-plain text file, also called a “binary file”.</p>

<p class=MsoNormal>To find other public domain texts to download, go to the
Project Gutenberg website at <span class=URL><u>http://www.gutenberg.org/</u></span>.</p>

<h2><a name="_Toc353630741">Source Code of the Transposition File Cipher
Program</a></h2>

<p class=MsoNormal>Like our transposition cipher testing program, the
transposition cipher file program will import our <span class=Filename>transpositionEncrypt.py</span>
and <span class=Filename>transpositionDecrypt.py</span> files so we can use the
<span class=Literal>encryptMessage()</span> and <span class=Literal>decryptMessage()</span>
functions in them. This way we don’t have to re-type the code for these
functions in our new program.</p>

<p class=MsoNormal>Open a new file editor window by clicking on <strong>File</strong>
&#9658; <strong>New Window</strong>. Type in the following code into the file
editor, and then save it as <span class=Filename>transpositionFileCipher.py</span>.
Press <strong>F5</strong> to run the program. Note that first you will need to
download <span class=Filename>frankenstein.txt</span> and place this file in
the same directory as the <span class=Filename>transpositionFileCipher.py</span>
file. You can download this file from <span class=URL><u>http://invpy.com/frankenstein.txt</u></span>.</p>

<div style='border:double #404040 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst align=right style='text-align:right'><span
class=SourceCodeFilename><span style='font-size:13.0pt;line-height:115%'>Source
code for transpositionFileCipher.py</span></span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 1.</span> <span
class=SourceCodeComment># Transposition Cipher Encrypt/Decrypt File</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 2.</span> <span
class=SourceCodeComment># http://inventwithpython.com/hacking (BSD Licensed)</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 3. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 4.</span>
import time, os, sys, transpositionEncrypt, transpositionDecrypt</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 5. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 6.</span>
def main():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 7.</span>    
inputFilename = 'frankenstein.txt'</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 8.</span>    
<span class=SourceCodeComment># BE CAREFUL! If a file with the outputFilename
name already exists,</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 9.</span>    
<span class=SourceCodeComment># this program will overwrite that file.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>10.</span>    
outputFilename = 'frankenstein.encrypted.txt'</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>11.</span>    
myKey = 10</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>12.</span>    
myMode = 'encrypt' <span class=SourceCodeComment># set to 'encrypt' or
'decrypt'</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>13. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>14.</span>    
<span class=SourceCodeComment># If the input file does not exist, then the
program terminates early.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>15.</span>    
if not os.path.exists(inputFilename):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>16.</span>        
print('The file %s does not exist. Quitting...' % (inputFilename))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>17.</span>        
sys.exit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>18. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>19.</span>    
<span class=SourceCodeComment># If the output file already exists, give the
user a chance to quit.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>20.</span>    
if os.path.exists(outputFilename):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>21.</span>        
print('This will overwrite the file %s. (C)ontinue or (Q)uit?' % (outputFilename))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>22.</span>        
response = input('&gt; ')</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>23.</span>        
if not response.lower().startswith('c'):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>24.</span>            
sys.exit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>25. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>26.</span>    
<span class=SourceCodeComment># Read in the message from the input file</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>27.</span>    
fileObj = open(inputFilename)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>28.</span>    
content = fileObj.read()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>29.</span>    
fileObj.close()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>30. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>31.</span>    
print('%sing...' % (myMode.title()))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>32. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>33.</span>    
<span class=SourceCodeComment># Measure how long the encryption/decryption takes.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>34.</span>    
startTime = time.time()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>35.</span>    
if myMode == 'encrypt':</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>36.</span>        
translated = transpositionEncrypt.encryptMessage(myKey, content)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>37.</span>    
elif myMode == 'decrypt':</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>38.</span>        
translated = transpositionDecrypt.decryptMessage(myKey, content)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>39.</span>    
totalTime = round(time.time() - startTime, 2)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>40.</span>    
print('%sion time: %s seconds' % (myMode.title(), totalTime))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>41. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>42.</span>    
<span class=SourceCodeComment># Write out the translated message to the output
file.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>43.</span>    
outputFileObj = open(outputFilename, 'w')</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>44.</span>    
outputFileObj.write(translated)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>45.</span>    
outputFileObj.close()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>46. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>47.</span>    
print('Done %sing %s (%s characters).' % (myMode, inputFilename, len(content)))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>48.</span>    
print('%sed file is %s.' % (myMode.title(), outputFilename))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>49. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>50. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>51.</span> <span
class=SourceCodeComment># If transpositionCipherFile.py is run (instead of
imported as a module)</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>52.</span> <span
class=SourceCodeComment># call the main() function.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>53.</span>
if __name__ == '__main__':</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceCodeComment>54.</span>    
main()</p>

</div>

<p class=MsoNormal>In the directory that <span class=Filename>frankenstein.txt</span>
and <span class=Filename>transpositionFileCipher.py</span> files are in, there
will be a new file named <span class=Filename>frankenstein.encrypted.txt</span>
that contains the content of <span class=Filename>frankenstein.txt</span> in
encrypted form. If you double-click the file to open it, it should look
something like this:</p>

<div style='border:solid #404040 1.0pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeExcerptCxSpFirst style='border:none;padding:0in'>PtFiyedleo 
a arnvmt eneeGLchongnes Mmuyedlsu0#uiSHTGA r sy,n t ys</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>s nuaoGeL</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>sc7s, </p>

<p class=SourceCodeExcerptCxSpLast style='border:none;padding:0in'>(the rest
has been cut out for brevity)</p>

</div>

<p class=MsoNormal>To decrypt, make the following changes to the source code
(written in bold) and run the transposition cipher program again:</p>

<div style='border:double #404040 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeHeadline>transpositionFileCipher.py </p>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceCodeComment> 7.</span>    
inputFilename = <strong><span style='font-family:"Lucida Sans Typewriter"'>'frankenstein.encrypted.txt'</span></strong></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 8.</span>     <span
class=SourceCodeComment># BE CAREFUL! If a file with the outputFilename name
already exists,</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 9.</span>    
<span class=SourceCodeComment># this program will overwrite that file.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>10.</span>    
outputFilename = <strong><span style='font-family:"Lucida Sans Typewriter"'>'frankenstein.decrypted.txt'</span></strong></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>11.</span>    
myKey = 10</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceCodeComment>12.</span>    
myMode = <strong><span style='font-family:"Lucida Sans Typewriter"'>'decrypt'</span></strong>
<span class=SourceCodeComment># set to 'encrypt' or 'decrypt'</span></p>

</div>

<p class=MsoNormal>This time when you run the program a new file will appear in
the folder named <span class=Filename>frankenstein.decrypted.txt</span> that is
identical to the original <span class=Filename>frankenstein.txt</span> file.</p>

<h2><a name="_Toc353630742">Sample Run of the Transposition File Cipher Program</a></h2>

<p class=MsoNormal>When you run the above program, it produces this output:</p>

<div style='border:solid windowtext 1.0pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SampleRunCxSpFirst>Encrypting...</p>

<p class=SampleRunCxSpMiddle>Encryption time: 1.21 seconds</p>

<p class=SampleRunCxSpMiddle>Done encrypting frankenstein.txt (441034
characters).</p>

<p class=SampleRunCxSpLast>Encrypted file is frankenstein.encrypted.txt.</p>

</div>

<p class=MsoNormal>A new <span class=Filename>frankenstein.encrypted.txt</span>
file will have been created in the same directory as <span class=Filename>transpositionFileCipher.py</span>.
If you open this file with IDLE’s file editor, you will see the encrypted
contents of <span class=Filename>frankenstein.py</span>. You can now email this
encrypted file to someone for them to decrypt.</p>

<h2><a name="_Toc353630743">Reading From Files</a></h2>

<p class=MsoNormal>Up until now, any input we want to give our programs would
have to be typed in by the user. Python programs can open and read files directly
off of the hard drive. There are three steps to reading the contents of a file:
opening the file, reading into a variable, and then closing the file.</p>

<h3>The <span class=Literal>open()</span> Function and File Objects</h3>

<p class=MsoNormal>The <span class=Literal>open()</span> function’s first
parameter is a string for the name of the file to open. If the file is in the
same directory as the Python program then you can just type in the name, such
as <span class=Literal>'thetimemachine.txt'</span>. You can always specify the <span
class=Definition><span style='font-size:12.0pt;line-height:115%'>absolute path</span></span>
of the file, which includes the directory that it is in. For example, <span
class=Literal>'c:\\Python32\\frankenstein.txt'</span> (on Windows) and <span
class=Literal>'/usr/foobar/frankenstein.txt'</span> (on OS X and Linux) are
absolute filenames. (Remember that the \ backslash must be escaped with another
backslash before it.)</p>

<p class=MsoNormal>The <span class=Literal>open()</span> function returns a
value of the “file object” data type. This value has several methods for
reading from, writing to, and closing the file.</p>

<h3>The <span class=Literal>read()</span> File Object Method</h3>

<p class=MsoNormal>The <span class=Literal>read()</span> method will return a
string containing all the text in the file. For example, say the file <span
class=Filename>spam.txt</span> contained the text “Hello world!”. (You can
create this file yourself using IDLE’s file editor. Just save the file with a
.txt extension.) Run the following from the interactive shell (this codes
assumes you are running Windows and the <span class=Filename>spam.txt</span>
file is in the <span class=Filename>c:\</span> directory):</p>

<div style='border:solid windowtext 1.0pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SampleRunCxSpFirst>&gt;&gt;&gt; fo = open('c:\\spam.txt', 'r')</p>

<p class=SampleRunCxSpMiddle>&gt;&gt;&gt; content = fo.read()</p>

<p class=SampleRunCxSpMiddle>&gt;&gt;&gt; print(content)</p>

<p class=SampleRunCxSpMiddle>Hello world!</p>

<p class=SampleRunCxSpLast>&gt;&gt;&gt;&nbsp;</p>

</div>

<p class=MsoNormal>If your text file has multiple lines, the string returned by
<span class=Literal>read()</span> will have <span class=Literal>\n</span>
newline characters in it at the end of each line. When you try to print a
string with newline characters, the string will print across several lines:</p>

<div style='border:solid #404040 1.0pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeExcerptCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt;
print('Hello\nworld!')</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>Hello</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>world!</p>

<p class=SourceCodeExcerptCxSpLast style='border:none;padding:0in'>&gt;&gt;&gt;
</p>

</div>

<p class=MsoNormal>If you get an error message that says “<span class=Literal>IOError:
[Errno 2] No such file or directory</span>” then double check that you typed
the filename (and if it is an absolute path, the directory name) correctly.
Also make sure that the file actually is where you think it is.</p>

<h3>The <span class=Literal>close()</span> File Object Method</h3>

<p class=MsoNormal>After you have read the file’s contents into a variable, you
can tell Python that you are done with the file by calling the <span
class=Literal>close()</span> method on the file object. </p>

<div style='border:solid #404040 1.0pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeExcerptCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt;
fo.close()</p>

<p class=SourceCodeExcerptCxSpLast style='border:none;padding:0in'>&gt;&gt;&gt;&nbsp;</p>

</div>

<p class=MsoNormal>Python will automatically close any open files when the
program terminates. But when you want to re-read the contents of a file, you
must close the file object and then call the <span class=Literal>open()</span>
function on the file again.</p>

<p class=MsoNormal>Here’s the code in our transposition cipher program that
reads the file whose filename is stored in the <span class=Literal>inputFilename</span>
variable:</p>

<div style='border:double #404040 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeHeadline>transpositionFileCipher.py </p>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceCodeComment>26.</span>    
<span class=SourceCodeComment># Read in the message from the input file</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>27.</span>    
fileObj = open(inputFilename)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>28.</span>    
content = fileObj.read()</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceCodeComment>29.</span>    
fileObj.close()</p>

</div>

<h2><a name="_Toc353630744">Writing To Files</a></h2>

<p class=MsoNormal>We read the original file and now will write the encrypted
(or decrypted) form to a different file. The file object returned by <span
class=Literal>open()</span> has a <span class=Literal>write()</span> function,
although you can only use this function if you open the file in “write” mode instead
of “read” mode. You do this by passing the string value <span class=Literal>'w'</span>
as the second parameter. For example:</p>

<div style='border:solid #404040 1.0pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeExcerptCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt;
fo = open('filename.txt', 'w')</p>

<p class=SourceCodeExcerptCxSpLast style='border:none;padding:0in'>&gt;&gt;&gt;&nbsp;</p>

</div>

<p class=MsoNormal>Along with “read” and “write”, there is also an “append”
mode. The “append” is like “write” mode, except any strings written to the file
will be appended to the end of any content that is already in the file. “Append”
mode will not overwrite the file if it already exists. To open a file in append
mode, pass the string <span class=Literal>'a'</span> as the second argument to <span
class=Literal>open()</span>.</p>

<p class=MsoNormal>(Just in case you were curious, you could pass the string <span
class=Literal>'r'</span> to <span class=Literal>open()</span> to open the file
in read mode. But since passing no second argument at all also opens the file
in read mode, there’s no reason to pass <span class=Literal>'r'</span>.)</p>

<h3>The <span class=Literal>write()</span> File Object Method</h3>

<p class=MsoNormal>You can write text to a file by calling the file object’s <span
class=Literal>write()</span> method. The file object must have been opened in
write mode, otherwise, you will get a “<span class=Literal>io.UnsupportedOperation:
not readable</span>” error message. (And if you try to call <span
class=Literal>read()</span> on a file object that was opened in write mode, you
will get a “<span class=Literal>io.UnsupportedOperation: not readable</span>” error
message.)</p>

<p class=MsoNormal>The <span class=Literal>write()</span> method takes one
argument: a string of text that is to be written to the file. Lines 43 to 45 open
a file in write mode, write to the file, and then close the file object.</p>

<div style='border:double #404040 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeHeadline>transpositionFileCipher.py </p>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceCodeComment>42.</span>    
<span class=SourceCodeComment># Write out the translated message to the output
file.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>43.</span>    
outputFileObj = open(outputFilename, 'w')</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>44.</span>    
outputFileObj.write(translated)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceCodeComment>45.</span>    
outputFileObj.close()</p>

</div>

<p class=MsoNormal>Now that we have the basics of reading and writing files,
let’s look at the source code to the transposition file cipher program.</p>

<h2><a name="_Toc353630745">How the Program Works</a></h2>

<div style='border:double #404040 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeHeadline>transpositionFileCipher.py </p>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceCodeComment> 1.</span> <span
class=SourceCodeComment># Transposition Cipher Encrypt/Decrypt File</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 2.</span> <span
class=SourceCodeComment># http://inventwithpython.com/hacking (BSD Licensed)</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 3. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 4.</span>
import time, os, sys, transpositionEncrypt, transpositionDecrypt</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 5. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 6.</span>
def main():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 7.</span>    
inputFilename = 'frankenstein.txt'</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 8.</span>    
<span class=SourceCodeComment># BE CAREFUL! If a file with the outputFilename
name already exists,</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment> 9.</span>    
<span class=SourceCodeComment># this program will overwrite that file.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>10.</span>    
outputFilename = 'frankenstein.encrypted.txt'</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>11.</span>    
myKey = 10</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceCodeComment>12.</span>    
myMode = 'encrypt' <span class=SourceCodeComment># set to 'encrypt' or
'decrypt'</span></p>

</div>

<p class=MsoNormal>The first part of the program should look familiar. Line 4
is an <span class=Literal>import</span> statement for our <span class=Filename>transpositionEncrypt.py</span>
and <span class=Filename>transpositionDecrypt.py</span> programs. It also
imports the Python’s <span class=Literal>time</span>, <span class=Literal>os</span>,
and <span class=Literal>sys</span> modules.</p>

<p class=MsoNormal>The <span class=Literal>main()</span> function will be
called after the <span class=Literal>def</span> statements have been executed
to define all the functions in the program. The <span class=Literal>inputFilename</span>
variable holds a string of the file to read, and the encrypted (or decrypted) text
is written to the file with the name in <span class=Literal>outputFilename</span>.</p>

<p class=MsoNormal>The transposition cipher uses an integer for a key, stored
in <span class=Literal>myKey</span>. If <span class=Literal>'encrypt'</span> is
stored in <span class=Literal>myMode</span>, the program will encrypt the
contents of the <span class=Literal>inputFilename</span> file. If <span
class=Literal>'decrypt'</span> is stored in <span class=Literal>myMode</span>,
the contents of <span class=Literal>inputFilename</span> will be decrypted.</p>

<h2><a name="_Toc353630746">The </a><span class=Literal>os.path.exists()</span>
Function</h2>

<p class=MsoNormal>Reading files is always harmless, but we need to be careful
when writing files. If we call the <span class=Literal>open()</span> function
in write mode with a filename that already exists, that file will first be
deleted to make way for the new file. This means we could accidentally erase an
important file if we pass the important file’s name to the <span class=Literal>open()</span>
function. Using the <span class=Literal>os.path.exists()</span> function, we
can check if a file with a certain filename already exists.</p>

<p class=MsoNormal>The <span class=Literal>os.path.exists()</span> file has a
single string parameter for the filename, and returns <span class=Literal>True</span>
if this file already exists and <span class=Literal>False</span> if it doesn’t.
The <span class=Literal>os.path.exists()</span> function exists inside the <span
class=Literal>path</span> module, which itself exists inside the <span
class=Literal>os</span> module. But if we import the <span class=Literal>os</span>
module, the <span class=Literal>path</span> module will be imported too.</p>

<p class=MsoNormal>Try typing the following into the interactive shell:</p>

<div style='border:solid #404040 1.0pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeExcerptCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt;
import os</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
os.path.exists('abcdef')</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>False</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
os.path.exists('C:\\Windows\\System32\\calc.exe')</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>True</p>

<p class=SourceCodeExcerptCxSpLast style='border:none;padding:0in'>&gt;&gt;&gt;&nbsp;</p>

</div>

<p class=MsoNormal>(Of course, you will only get the above results if you are
running Python on Windows. The <span class=Filename>calc.exe</span> file does
not exist on OS X or Linux.)</p>

<p class=MsoNormal>&nbsp;</p>

<div style='border:double #404040 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeHeadline>transpositionFileCipher.py </p>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceCodeComment>14.</span>    
<span class=SourceCodeComment># If the input file does not exist, then the
program terminates early.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>15.</span>    
if not os.path.exists(inputFilename):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>16.</span>        
print('The file %s does not exist. Quitting...' % (inputFilename))</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceCodeComment>17.</span>        
sys.exit()</p>

</div>

<p class=MsoNormal>We use the <span class=Literal>os.path.exists()</span>
function to check that the filename in <span class=Literal>inputFilename </span>actually
exists. Otherwise, we have no file to encrypt or decrypt. In that case, we
display a message to the user and then quit the program.</p>

<h2><a name="_Toc353630747">The </a><span class=Literal>startswith()</span> and
<span class=Literal>endswith()</span> String Methods</h2>

<div style='border:double #404040 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeHeadline>transpositionFileCipher.py </p>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceCodeComment>19.</span>    
<span class=SourceCodeComment># If the output file already exists, give the
user a chance to quit.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>20.</span>    
if os.path.exists(outputFilename):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>21.</span>        
print('This will overwrite the file %s. (C)ontinue or (Q)uit?' % (outputFilename))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>22.</span>        
response = input('&gt; ')</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>23.</span>        
if not response.lower().startswith('c'):</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceCodeComment>24.</span>            
sys.exit()</p>

</div>

<p class=MsoNormal>If the file the program will write to already exists, the
user is asked to type in “C” if they want to continue running the program or “Q”
to quit the program.</p>

<p class=MsoNormal>The string in the response variable will have <span
class=Literal>lower()</span> called on it, and the returned string from <span
class=Literal>lower()</span> will have the string method <span class=Literal>startswith()</span>
called on it. The <span class=Literal>startswith()</span> method will return <span
class=Literal>True</span> if its string argument can be found at the beginning
of the string. Try typing the following into the interactive shell:</p>

<div style='border:solid #404040 1.0pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeExcerptCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt;
'hello'.startswith('h')</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>True</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
'hello world!'.startswith('hello wo')</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>True</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
'hello'.startswith('H')</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>False</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
spam = 'Albert'</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
spam.startswith('Al')</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>True</p>

<p class=SourceCodeExcerptCxSpLast style='border:none;padding:0in'>&gt;&gt;&gt;&nbsp;</p>

</div>

<p class=MsoNormal>On line 23, if the user did not type in <span class=Literal>'c'</span>,
<span class=Literal>'continue'</span>, <span class=Literal>'C'</span>, or
another string that begins with C, then <span class=Literal>sys.exit()</span>
will be called to end the program. Technically, the user doesn’t have to enter
“Q” to quit; any string that does not begin with “C” will cause the sys.exit()
function to be called to quit the program.</p>

<p class=MsoNormal>There is also an <span class=Literal>endswith()</span>
string method that can be used to check if a string value ends with another
certain string value. Try typing the following into the interactive shell:</p>

<div style='border:solid #404040 1.0pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeExcerptCxSpFirst style='border:none;padding:0in'> &gt;&gt;&gt;
'Hello world!'.endswith('world!')</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>True</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
'Hello world!'.endswith('world')</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>False</p>

<p class=SourceCodeExcerptCxSpLast style='border:none;padding:0in'>&gt;&gt;&gt;&nbsp;</p>

</div>

<h2><a name="_Toc353630748">The </a><span class=Literal>title()</span> String
Method</h2>

<p class=MsoNormal>Just like the <span class=Literal>lower()</span> and <span
class=Literal>upper()</span> string methods will return a string in lowercase
or uppercase, the <span class=Literal>title()</span> string method returns a
string in “title case”. Title case is where every word is uppercase for the
first character and lowercase for the rest of the characters. Try typing the
following into the interactive shell:</p>

<div style='border:solid #404040 1.0pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeExcerptCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt;
'hello'.title()</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>'Hello'</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
'HELLO'.title()</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>'Hello'</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
'hElLo'.title()</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>'Hello'</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
'hello world! HOW ARE YOU?'.title()</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>'Hello
World! How Are You?'</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
'extra! extra! man bites shark!'.title()</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>'Extra!
Extra! Man Bites Shark!'</p>

<p class=SourceCodeExcerptCxSpLast style='border:none;padding:0in'>&gt;&gt;&gt;&nbsp;</p>

</div>

<div style='border:double #404040 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeHeadline>transpositionFileCipher.py </p>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceCodeComment>26.</span>    
<span class=SourceCodeComment># Read in the message from the input file</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>27.</span>    
fileObj = open(inputFilename)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>28.</span>    
content = fileObj.read()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>29.</span>    
fileObj.close()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>30. </span></p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceCodeComment>31.</span>    
print('%sing...' % (myMode.title()))</p>

</div>

<p class=MsoNormal>Lines 27 to 29 open the file with the name stored in <span
class=Literal>inputFilename</span> and read in its contents into the <span
class=Literal>content</span> variable. On line 31, we display a message telling
the user that the encryption or decryption has begun. Since <span
class=Literal>myMode</span> should either contain the string <span
class=Literal>'encrypt'</span> or <span class=Literal>'decrypt'</span>, calling
the <span class=Literal>title()</span> string method will either display <span
class=Literal>'Encrypting...'</span> or <span class=Literal>'Decrypting...'</span>.</p>

<h2><a name="_Toc353630749">The </a><span class=Literal>time</span> Module and <span
class=Literal>time.time()</span> Function</h2>

<p class=MsoNormal>All computers have a clock that keeps track of the current
date and time. Your Python programs can access this clock by calling the <span
class=Literal>time.time()</span> function. (This is a function named <span
class=Literal>time()</span> that is in a module named <span class=Literal>time</span>.)</p>

<p class=MsoNormal>The <span class=Literal>time.time()</span> function will
return a float value of the number of seconds since January 1<sup>st</sup>,
1970. This moment is called the <span class=Definition><span style='font-size:
12.0pt;line-height:115%'>Unix Epoch</span></span>. Try typing the following
into the interactive shell:</p>

<div style='border:solid #404040 1.0pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeExcerptCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt;
import time</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
time.time()</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>1349411356.892</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
time.time()</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>1349411359.326</p>

<p class=SourceCodeExcerptCxSpLast style='border:none;padding:0in'>&gt;&gt;&gt;
</p>

</div>

<p class=MsoNormal>The float value shows that the <span class=Literal>time.time()</span>
function can be precise down to a <span class=Definition><span
style='font-size:12.0pt;line-height:115%'>millisecond</span></span> (that is,
1/1,000 of a second). Of course, the numbers that <span class=Literal>time.time()</span>
displays for you will depend on the moment in time that you call this function.
It might not be clear that 1349411356.892 is Thursday, October 4<sup>th</sup>,
2012 around 9:30 pm. However, the <span class=Literal>time.time()</span>
function is useful for comparing the number of seconds between calls to <span
class=Literal>time.time()</span>. We can use this function to determine how
long our program has been running.</p>

<div style='border:double #404040 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeHeadline>transpositionFileCipher.py </p>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceCodeComment>33.</span>    
<span class=SourceCodeComment># Measure how long the encryption/decryption
takes.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>34.</span>    
startTime = time.time()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>35.</span>    
if myMode == 'encrypt':</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>36.</span>        
translated = transpositionEncrypt.encryptMessage(myKey, content)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>37.</span>    
elif myMode == 'decrypt':</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>38.</span>        
translated = transpositionDecrypt.decryptMessage(myKey, content)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>39.</span>    
totalTime = round(time.time() - startTime, 2)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceCodeComment>40.</span>    
print('%sion time: %s seconds' % (myMode.title(), totalTime))</p>

</div>

<p class=MsoNormal>We want to measure how long the encryption or decryption
process takes for the contents of the file. Lines 35 to 38 call the <span
class=Literal>encryptMessage()</span> or <span class=Literal>decryptMessage()</span>
(depending on whether <span class=Literal>'encrypt'</span> or <span
class=Literal>'decrypt'</span> is stored in the <span class=Literal>myMode</span>
variable). Before this code however, we will call <span class=Literal>time.time()</span>
and store the current time in a variable named <span class=Literal>startTime</span>.</p>

<p class=MsoNormal>On line 39 after the encryption or decryption function calls
have returned, we will call <span class=Literal>time.time()</span> again and
subtract <span class=Literal>startTime</span> from it. This will give us the
number of seconds between the two calls to <span class=Literal>time.time()</span>.</p>

<p class=MsoNormal>For example, if you subtract the floating point values
returned when I called <span class=Literal>time.time()</span> before in the
interactive shell, you would get the amount of time in between those calls
while I was typing:</p>

<div style='border:solid #404040 1.0pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeExcerptCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt;
1349411359.326 - 1349411356.892</p>

<p class=SourceCodeExcerptCxSpMiddle style='border:none;padding:0in'>2.434000015258789</p>

<p class=SourceCodeExcerptCxSpLast style='border:none;padding:0in'>&gt;&gt;&gt;&nbsp;</p>

</div>

<p class=MsoNormal>(The difference Python calculated between the two floating
point values is not precise due to rounding errors, which cause very slight
inaccuracies when doing math with floats. For our programs, it will not matter.
But you can read more about rounding errors at <span class=URL><u>http://invpy.com/rounding</u></span>.)</p>

<p class=MsoNormal>The <span class=Literal>time.time() - startTime</span>
expression evaluates to a value that is passed to the <span class=Literal>round()</span>
function which rounds to the nearest two decimal points. This value is stored
in <span class=Literal>totalTime</span>. On line 40, the amount of time is
displayed to the user by calling <span class=Literal>print()</span>.</p>

<h2><a name="_Toc353630750">Back to the Code</a></h2>

<div style='border:double #404040 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeHeadline>transpositionFileCipher.py </p>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceCodeComment>42.</span>    
<span class=SourceCodeComment># Write out the translated message to the output
file.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>43.</span>    
outputFileObj = open(outputFilename, 'w')</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>44.</span>    
outputFileObj.write(translated)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceCodeComment>45.</span>    
outputFileObj.close()</p>

</div>

<p class=MsoNormal>The encrypted (or decrypted) file contents are now stored in
the <span class=Literal>translated</span> variable. But this string will be forgotten
when the program terminates, so we want to write the string out to a file to
store it on the hard drive. The code on lines 43 to 45 do this by opening a new
file (passing <span class=Literal>'w'</span> to <span class=Literal>open()</span>
to open the file in write mode) and then calling the <span class=Literal>write()</span>
file object method.</p>

<div style='border:double #404040 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeHeadline>transpositionFileCipher.py </p>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceCodeComment>47.</span>    
print('Done %sing %s (%s characters).' % (myMode, inputFilename, len(content)))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>48.</span>    
print('%sed file is %s.' % (myMode.title(), outputFilename))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>49. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>50. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>51.</span> <span
class=SourceCodeComment># If transpositionCipherFile.py is run (instead of
imported as a module)</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>52.</span> <span
class=SourceCodeComment># call the main() function.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceCodeComment>53.</span>
if __name__ == '__main__':</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceCodeComment>54.</span>    
main()</p>

</div>

<p class=MsoNormal>Afterwards, we print some more messages to the user telling
them that the process is done and what the name of the written file is. Line 48
is the last line of the <span class=Literal>main()</span> function.</p>

<p class=MsoNormal>Lines 53 and 54 (which get executed after the <span
class=Literal>def</span> statement on line 6 is executed) will call the <span
class=Literal>main()</span> function if this program is being run instead of
being imported. (This is explained in Chapter 8’s “The Special <span
class=Literal>__name__</span> Variable” section.)</p>

<h2><a name="_Toc353630751">Practice Exercises, Chapter 11, Set A</a></h2>

<p class=MsoNormal>Practice exercises can be found at <span class=URL><u>http://invpy.com/hackingpractice11A</u></span>.</p>

<h2><a name="_Toc353630752">Summary</a></h2>

<p class=MsoNormal>Congratulations! There wasn’t much to this new program aside
from the <span class=Literal>open()</span>, <span class=Literal>write()</span>,
<span class=Literal>read()</span>, and <span class=Literal>close()</span> functions,
but this lets us encrypt text files on our hard drive that are megabytes or
gigabytes in size. It doesn’t take much new code because all of the
implementation for the cipher has already been written. We can extend our
programs (such as adding file reading and writing capabilities) by importing
their functions for use in new programs. This greatly increases our ability to
use computers to encrypt information.</p>

<p class=MsoNormal>There are too many possible keys to simply brute-force and
examine the output of a message encrypted with the transposition cipher. But if
we can write a program that recognizes English (as opposed to strings of
gibberish), we can have the computer examine the output of thousands of
decryption attempts and determine which key can successfully decrypt a message
to English.</p>

</div>

</body>

</html>
